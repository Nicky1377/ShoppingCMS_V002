@using ShoppingCMS_V002.Models
@model List<AdminTypeRoutesModel>

@{
    ViewBag.Title = "ModalTree";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="form-group">
    <label style="margin-bottom:2%">دسترسی ادمین</label>
    <div id="kt_tree_8" class="col-12" style="margin:auto;">
        <ul style="list-style-type: none">
            @foreach (var Catitem in @Model)
            {
                <li ondblclick="return dblClick(@Catitem.CatId)" style="-webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -o-user-select: none; user-select: none;">
                    <div class="kt-checkbox kt-checkbox--danger">
                        <input disabled id="MCat_@Catitem.CatId" class="form-control ModalCat" type="checkbox" />@Catitem.CatName
                        <span></span>
                    </div>
                    <ul id="M_RouteList-@Catitem.CatId" style="list-style-type: none;">
                        @foreach (var Routeitem in Catitem.RouteList)
                        {

                            <li data-jstree='{ }'>
                                <label class="kt-checkbox kt-checkbox--brand">
                                    <input disabled checked id="M_ruoteitm-@Routeitem.RouteId" class="form-control Mroute-@Catitem.CatId" type="checkbox" />@Routeitem.RouteName : @Routeitem.RouteUrl
                                    <span></span>
                                </label>
                            </li>
                        }
                    </ul>
                </li>
            }

        </ul>
    </div>

</div>
<script>
    $(document).ready(function () {
        $('.ModalCat').each(function (e, obj) {

            var id__ = obj.id.replace("MCat_","");
            

            if ($('.Mroute-' + id__ + ':checked').length == $('.Mroute-' + id__).length) {
                    $('#MCat_' + id__).prop("checked", true);
                } else {
                    $('#MCat_' + id__).prop("checked", false);
                }

        });
    });
</script>

